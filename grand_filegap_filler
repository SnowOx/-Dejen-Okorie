#! python3
# grand_gap_filler - program to correct gaps in file numbering

import re
import os

folder = 'C:\\Users\\A\Google Drive\\OP2\\TestFolder'

def put_files_in_sorted_list(folder):
    sorted_file_list = [filename for filename in os.listdir(folder)]
    print(sorted_file_list)
    return sorted_file_list

def get_list_of_ints(sorted_file_list):
    sorted_file_str = ''.join(sorted_file_list)
    filename_digits_str = re.findall(r'\d+', sorted_file_str)
    filename_int_list = [int(elem) for elem in filename_digits_str]
    print('filename_digits_int >> ' + str(filename_int_list))
    return filename_int_list

def get_correct_sequence_numbering(input_list):
    for i in range(len(input_list)):
        try:
            input_list[i] = seed + i
            print(input_list[i])
        except: 
            seed = input_list[0]
            print('seed: ' + str(seed))
        correct_sequence_list = input_list
        print('Corrected list >> \n' + str(correct_sequence_list))

def replace_file_names(correct_sequence_list):
    for f, e in zip(sorted_file_list, correct_sequence_list):
        print('Original filename %s') % (f)
        file_with_corrected_numbers = re.sub('\d+', f, e)
        print('Filename >> %s after re.sub') % (file_with_corrected_numbers)

put_files_in_sorted_list(folder)
sorted_file_list = [filename for filename in os.listdir(folder)]
get_list_of_ints(sorted_file_list)
get_correct_sequence_numbering(filename_int_list)
replace_file_names(correct_sequence_list)
